// qr-canvas-js v1.1.0 | MIT
var QRCanvas=(()=>{var W=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var R=(t,e)=>{for(var r in e)W(t,r,{get:e[r],enumerable:!0})},S=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of q(e))!I.call(t,o)&&o!==r&&W(t,o,{get:()=>e[o],enumerable:!(n=m(e,o))||n.enumerable});return t};var j=t=>S(W({},"__esModule",{value:!0}),t);var rt={};R(rt,{default:()=>ot,qrCanvas:()=>M,qrMatrix:()=>G,utf8Bytes:()=>E});function M(t,e={}){if(typeof t!="string")throw new TypeError("text must be a string");let r=e.margin??4;if(r<0)throw new RangeError("margin must be >= 0");let n=e.dark??"#000",o=e.light??"#fff",l=P(t),a=l.size,c=e.scale??6;if(e.scale!==void 0&&e.scale<=0)throw new RangeError("scale must be > 0");let i;if(e.width){if(e.width<=0)throw new RangeError("width must be > 0");i=e.width,c=i/(a+r*2)}else i=(a+r*2)*c;let s=document.createElement("canvas");s.width=i,s.height=i;let f=s.getContext("2d");f.fillStyle=o,f.fillRect(0,0,i,i),f.fillStyle=n;for(let g=0;g<a;g++)for(let d=0;d<a;d++)if(l.modules[g][d]){let B=Math.floor((d+r)*c),x=Math.floor((g+r)*c),p=Math.floor((d+r+1)*c),u=Math.floor((g+r+1)*c);f.fillRect(B,x,p-B,u-x)}return s}function G(t){if(typeof t!="string")throw new TypeError("text must be a string");let e=P(t);return{size:e.size,modules:e.modules}}function P(t){let e=E(t),r=[{v:1,size:21,totalDataCW:19,capacity:17,eccPerBlock:7,g1Blocks:1,g1DataCW:19,g2Blocks:0,g2DataCW:0},{v:2,size:25,totalDataCW:34,capacity:32,eccPerBlock:10,g1Blocks:1,g1DataCW:34,g2Blocks:0,g2DataCW:0},{v:3,size:29,totalDataCW:55,capacity:53,eccPerBlock:15,g1Blocks:1,g1DataCW:55,g2Blocks:0,g2DataCW:0},{v:4,size:33,totalDataCW:80,capacity:78,eccPerBlock:20,g1Blocks:1,g1DataCW:80,g2Blocks:0,g2DataCW:0},{v:5,size:37,totalDataCW:108,capacity:106,eccPerBlock:26,g1Blocks:1,g1DataCW:108,g2Blocks:0,g2DataCW:0},{v:6,size:41,totalDataCW:136,capacity:134,eccPerBlock:18,g1Blocks:2,g1DataCW:68,g2Blocks:0,g2DataCW:0},{v:7,size:45,totalDataCW:156,capacity:154,eccPerBlock:20,g1Blocks:2,g1DataCW:78,g2Blocks:0,g2DataCW:0},{v:8,size:49,totalDataCW:194,capacity:192,eccPerBlock:24,g1Blocks:2,g1DataCW:97,g2Blocks:0,g2DataCW:0},{v:9,size:53,totalDataCW:232,capacity:230,eccPerBlock:30,g1Blocks:2,g1DataCW:116,g2Blocks:0,g2DataCW:0},{v:10,size:57,totalDataCW:274,capacity:271,eccPerBlock:18,g1Blocks:2,g1DataCW:68,g2Blocks:2,g2DataCW:69}],n=null;for(let u of r)if(e.length<=u.capacity){n=u;break}if(!n)throw new Error("Input too long (max ~271 bytes at version 10-L).");let o=[];D(o,4,4);let l=n.v<=9?8:16;D(o,e.length,l);for(let u of e)D(o,u,8);let c=n.totalDataCW*8-o.length;for(c>0&&D(o,0,Math.min(4,c));o.length%8!==0;)o.push(0);let i=[];for(let u=0;u<o.length;u+=8){let h=0;for(let k=0;k<8;k++)h=h<<1|o[u+k];i.push(h)}let s=[236,17],f=0;for(;i.length<n.totalDataCW;)i.push(s[f++&1]);let g=_(i,n),d=L(n.size);T(d,n.v),H(d,g);let B=0,x=1/0,p=null;for(let u=0;u<8;u++){let h=O(d);K(h,u),Q(h,u),n.v>=7&&U(h,n.v);let k=Y(h);k<x&&(x=k,B=u,p=h)}return{size:n.size,modules:p.modules}}function _(t,e){let r=e.g1Blocks+e.g2Blocks;if(r===1){let s=v(t,e.eccPerBlock);return t.concat(s)}let n=[],o=0;for(let s=0;s<e.g1Blocks;s++)n.push(t.slice(o,o+e.g1DataCW)),o+=e.g1DataCW;for(let s=0;s<e.g2Blocks;s++)n.push(t.slice(o,o+e.g2DataCW)),o+=e.g2DataCW;let l=n.map(s=>v(s,e.eccPerBlock)),a=Math.max(e.g1DataCW,e.g2DataCW||0),c=[];for(let s=0;s<a;s++)for(let f=0;f<r;f++)s<n[f].length&&c.push(n[f][s]);let i=[];for(let s=0;s<e.eccPerBlock;s++)for(let f=0;f<r;f++)i.push(l[f][s]);return c.concat(i)}function L(t){let e=Array.from({length:t},()=>Array(t).fill(!1)),r=Array.from({length:t},()=>Array(t).fill(!1));return{size:t,modules:e,reserved:r}}function O(t){let e=t.size,r=Array.from({length:e},(o,l)=>t.modules[l].slice()),n=Array.from({length:e},(o,l)=>t.reserved[l].slice());return{size:e,modules:r,reserved:n}}function y(t,e,r,n,o=!0){e<0||r<0||e>=t.size||r>=t.size||(t.modules[r][e]=!!n,o&&(t.reserved[r][e]=!0))}function T(t,e){let r=t.size;z(t,0,0),z(t,r-7,0),z(t,0,r-7);for(let o=8;o<r-8;o++)y(t,o,6,o%2===0,!0),y(t,6,o,o%2===0,!0);y(t,8,4*e+9,!0,!0);for(let o=0;o<9;o++)o!==6&&(t.reserved[8][o]=!0,t.reserved[o][8]=!0);for(let o=0;o<8;o++)t.reserved[o][r-8]=!0;for(let o=0;o<8;o++)t.reserved[r-8][o]=!0;for(let o=r-8;o<r;o++)t.reserved[8][o]=!0;for(let o=r-7;o<r;o++)t.reserved[o][8]=!0;let n=X(e);if(n.length)for(let o of n)for(let l of n)l<=8&&o<=8||l>=r-9&&o<=8||l<=8&&o>=r-9||V(t,l-2,o-2);if(e>=7){for(let o=0;o<6;o++)for(let l=r-11;l<=r-9;l++)t.reserved[l][o]=!0;for(let o=r-11;o<=r-9;o++)for(let l=0;l<6;l++)t.reserved[l][o]=!0}}function z(t,e,r){for(let n=-1;n<=7;n++)for(let o=-1;o<=7;o++){let l=e+o,a=r+n;if(!(l>=0&&a>=0&&l<t.size&&a<t.size))continue;if(o===-1||n===-1||o===7||n===7)y(t,l,a,!1,!0);else{let s=o===0||n===0||o===6||n===6,f=o>=2&&o<=4&&n>=2&&n<=4;y(t,l,a,s||f,!0)}}}function V(t,e,r){for(let n=0;n<5;n++)for(let o=0;o<5;o++){let l=o===0||n===0||o===4||n===4,a=o===2&&n===2;y(t,e+o,r+n,l||a,!0)}}function X(t){if(t===1)return[];let e=t*4+17,r=Math.floor(t/7)+2,n=Math.floor((t*8+r*3+5)/(r*4-4))*2,o=[6];for(let l=e-7;o.length<r;l-=n)o.splice(1,0,l);return o}function H(t,e){let r=t.size,n=0,o=r-1,l=r-1,a=-1;for(;o>0;){o===6&&o--;for(let c=0;c<r;c++){let i=l+a*c;for(let s=o;s>=o-1;s--){if(t.reserved[i][s])continue;let f=J(e,n++);t.modules[i][s]=f}}l+=a*(r-1),a*=-1,o-=2}}function J(t,e){let r=Math.floor(e/8),n=7-e%8;return r>=t.length?!1:(t[r]>>>n&1)===1}function K(t,e){let r=t.size;for(let n=0;n<r;n++)for(let o=0;o<r;o++)t.reserved[n][o]||N(e,o,n)&&(t.modules[n][o]=!t.modules[n][o])}function N(t,e,r){switch(t){case 0:return(e+r)%2===0;case 1:return r%2===0;case 2:return e%3===0;case 3:return(e+r)%3===0;case 4:return(Math.floor(r/2)+Math.floor(e/3))%2===0;case 5:return e*r%2+e*r%3===0;case 6:return(e*r%2+e*r%3)%2===0;case 7:return((e+r)%2+e*r%3)%2===0;default:return!1}}function Q(t,e){let n=8|e,o=n<<10|A(n,1335,10);o^=21522;let l=t.size,a=s=>(o>>>s&1)===1,c=[];for(let s=0;s<=5;s++)c.push([s,8]);c.push([7,8]),c.push([8,8]);for(let s=7;s>=0;s--)s!==6&&c.push([8,s]);let i=[];for(let s=l-1;s>=l-7;s--)i.push([8,s]);for(let s=l-8;s<=l-1;s++)i.push([s,8]);for(let s=0;s<15;s++){let f=a(14-s),[g,d]=c[s];t.modules[d][g]=f,t.reserved[d][g]=!0;let[B,x]=i[s];t.modules[x][B]=f,t.reserved[x][B]=!0}}function U(t,e){let r=e<<12|A(e,7973,12),n=t.size;for(let o=0;o<18;o++){let l=(r>>>o&1)===1,a=Math.floor(o/3),c=n-11+o%3;t.modules[a][c]=l,t.reserved[a][c]=!0,t.modules[c][a]=l,t.reserved[c][a]=!0}}function Y(t){let e=t.size,r=0;for(let c=0;c<e;c++){let i=1;for(let s=1;s<e;s++)t.modules[c][s]===t.modules[c][s-1]?i++:(r+=C(i),i=1);r+=C(i)}for(let c=0;c<e;c++){let i=1;for(let s=1;s<e;s++)t.modules[s][c]===t.modules[s-1][c]?i++:(r+=C(i),i=1);r+=C(i)}for(let c=0;c<e-1;c++)for(let i=0;i<e-1;i++){let s=t.modules[c][i];s===t.modules[c][i+1]&&s===t.modules[c+1][i]&&s===t.modules[c+1][i+1]&&(r+=3)}r+=Z(t,[1,0,1,1,1,0,1]);let o=0;for(let c=0;c<e;c++)for(let i=0;i<e;i++)t.modules[c][i]&&o++;let l=e*e,a=Math.abs(o*100/l-50);return r+=Math.floor(a/5)*10,r}function C(t){return t>=5?3+(t-5):0}function Z(t,e){let r=t.size,n=0,o=(l,a)=>{for(let c=0;c<=a-7;c++){let i=!0;for(let s=0;s<7;s++)if((l(c+s)?1:0)!==e[s]){i=!1;break}if(i){let s=c-4>=0&&[0,1,2,3].every(g=>!l(c-1-g)),f=c+7+4<=a&&[0,1,2,3].every(g=>!l(c+7+g));(s||f)&&(n+=40)}}};for(let l=0;l<r;l++)o(a=>t.modules[l][a],r);for(let l=0;l<r;l++)o(a=>t.modules[a][l],r);return n}function v(t,e){let r=$(e),n=t.concat(new Array(e).fill(0));for(let o=0;o<t.length;o++){let l=n[o];if(l!==0)for(let a=0;a<r.length;a++)n[o+a]^=F(r[a],l)}return n.slice(n.length-e)}function $(t){let e=[1];for(let r=0;r<t;r++)e=tt(e,[1,et(2,r)]);return e}function tt(t,e){let r=new Array(t.length+e.length-1).fill(0);for(let n=0;n<t.length;n++)for(let o=0;o<e.length;o++)r[n+o]^=F(t[n],e[o]);return r}var b=(()=>{let t=new Array(512).fill(0),e=1;for(let r=0;r<255;r++)t[r]=e,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)t[r]=t[r-255];return t})(),w=(()=>{let t=new Array(256).fill(0);for(let e=0;e<255;e++)t[b[e]]=e;return t})();function F(t,e){return t===0||e===0?0:b[w[t]+w[e]]}function et(t,e){return e===0?1:t===0?0:b[w[t]*e%255]}function A(t,e,r){let n=t<<r;for(let o=17;o>=r;o--)n&1<<o&&(n^=e<<o-r);return n&(1<<r)-1}function D(t,e,r){for(let n=r-1;n>=0;n--)t.push(e>>>n&1)}function E(t){let e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n>=55296&&n<=56319&&r+1<t.length){let o=t.charCodeAt(r+1);o>=56320&&o<=57343&&(n=65536+(n-55296<<10)+(o-56320),r++)}n<128?e.push(n):n<2048?(e.push(192|n>>6),e.push(128|n&63)):n<65536?(e.push(224|n>>12),e.push(128|n>>6&63),e.push(128|n&63)):(e.push(240|n>>18),e.push(128|n>>12&63),e.push(128|n>>6&63),e.push(128|n&63))}return e}var ot=M;return j(rt);})();
